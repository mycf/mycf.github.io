令牌桶限流的思想
- 以恒定的速率生成令牌，放入令牌桶；
- 请求在获得令牌后才能执行；
- 请求获取不到令牌则阻塞；
![[令牌桶 2024-03-30 22.15.15.excalidraw]]
定时任务
- 建模
	1. 服务在每 interval 秒内的处理的请求量不超过r;
	2. 令牌唯一标识为uuid;
- 思路
	1. 在Redis中维护一个List对象，作为令牌桶; 
	2. 定时任务作为一个生产者，以从interval秒的间隔往令牌桶中放入r个令牌,
		- LPUSH #{bucket key} uuid；
	3. 请求作为消费者，从List中获取令牌
		- BRPOP #{bucket key};
